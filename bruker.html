<!DOCTYPE html>
<html lang="no">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bruker - Drone Organisering</title>
    <link rel="stylesheet" href="style.css">
    <script type="module" src="./app.js"></script>
</head>
<body>
    <header>
        <h1>Velkommen, Drone Bruker</h1>
    </header>

    <main>
        <section>
            <h2>Oversikt over Droner</h2>
            <table>
                <thead>
                    <tr>
                        <th>Navn</th>
                        <th>Regnummer</th>
                        <th>Siste Vedlikehold</th>
                        <th>Utlånt</th>
                        <th>Utlånt Til</th>
                        <th>Utlånt Dato</th>
                        <th>Forventet Retur</th>
                    </tr>
                </thead>
                <tbody id="droneList"></tbody> <!-- Empty body to populate dynamically -->
            </table>
        </section>
    </main>

    <footer>
        <p>© 2024 Drone Organisering</p>
    </footer>

    <script>
        import { getDrones } from './app.js';

        async function displayDrones() {
            const drones = await getDrones();
            const droneListElement = document.getElementById("droneList");

            drones.forEach(drone => {
                const row = document.createElement("tr");
                
                row.innerHTML = `
                    <td>${drone.name}</td>
                    <td>${drone.regNum}</td>
                    <td>${drone.lastMaintenance}</td>
                    <td>${drone.isLoaned}</td>
                    <td>${drone.loanedTo || "-"}</td>
                    <td>${drone.loanedDate || "-"}</td>
                    <td>${drone.returnDate || "-"}</td>
                `;

                droneListElement.appendChild(row);
            });
        }

        displayDrones();  // Fetch and display drones on page load
    </script>
</body>
</html>
